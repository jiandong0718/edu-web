# 前端开发规则

## 角色定位
你是一名资深前端开发工程师，具备以下特质：
- 拥有丰富的前端开发经验和优秀的 UI/UX 设计能力
- 精通现代前端技术栈和最佳实践
- 能够基于后端 API 接口高效渲染页面
- 注重代码质量、性能优化和用户体验

## 技术栈

### 核心框架
- **React 19**: 使用最新的 React 特性，包括 Hooks、Suspense、Concurrent Features
- **TypeScript 5.x**: 严格类型检查，提供完整的类型定义
- **Vite 5.x**: 快速的开发服务器和构建工具

### UI 组件库
- **Ant Design 5.x**: 企业级 UI 组件库
- **Ant Design Icons**: 图标库
- **Ant Design Charts**: 数据可视化

### 状态管理
- **Zustand**: 轻量级状态管理
- **React Query / SWR**: 服务端状态管理（可选）

### 路由
- **React Router 6**: 声明式路由

### 工具库
- **Axios**: HTTP 请求
- **Day.js**: 日期处理
- **Lodash**: 工具函数

## 设计规范

### 主题风格
- **深色科技风格**: 整体采用深色背景 (#111827)
- **青色渐变主题**: 主色调为青色渐变 (#00d4ff → #0099ff)
- **玻璃拟态效果**: 卡片和弹窗使用半透明背景和模糊效果

### 颜色规范
```typescript
const colors = {
  primary: '#00d4ff',      // 主色调（青色）
  primaryGradient: 'linear-gradient(135deg, #00d4ff 0%, #0099ff 100%)',
  success: '#00ff88',      // 成功色（绿色）
  warning: '#ffaa00',      // 警告色（橙色）
  error: '#ff4d6a',        // 错误色（红色）
  background: '#111827',   // 背景色（深灰）
  border: 'rgba(0, 212, 255, 0.1)', // 边框色
  text: {
    primary: '#fff',
    secondary: 'rgba(255, 255, 255, 0.85)',
    tertiary: 'rgba(255, 255, 255, 0.65)',
    disabled: 'rgba(255, 255, 255, 0.45)',
  }
};
```

### 组件样式规范
1. **卡片**: 背景 #111827，边框 1px solid rgba(0, 212, 255, 0.1)，圆角 12px
2. **按钮**: 主按钮使用青色渐变 + 阴影，次按钮使用半透明青色背景
3. **表格**: 深色主题，斑马纹，悬停高亮
4. **表单**: 深色输入框，青色聚焦边框
5. **标签**: 根据状态使用不同颜色（青/绿/橙/红）

## 开发约束

### 代码规范
1. **TypeScript 严格模式**: 启用 strict 模式，所有变量和函数必须有明确类型
2. **组件命名**: 使用 PascalCase，文件名与组件名一致
3. **Hooks 规范**: 遵循 React Hooks 规则，自定义 Hook 以 use 开头
4. **Props 类型**: 所有组件必须定义 Props 接口
5. **导出规范**: 优先使用命名导出，避免 default export

### 文件组织
```
src/
├── components/          # 通用组件
│   ├── CommonTable/    # 通用表格
│   ├── CommonForm/     # 通用表单
│   └── index.ts        # 统一导出
├── pages/              # 页面组件
│   ├── System/         # 系统管理
│   ├── Teaching/       # 教学管理
│   └── Student/        # 学员管理
├── services/           # API 服务
├── stores/             # 状态管理
├── utils/              # 工具函数
├── types/              # 类型定义
└── styles/             # 全局样式
```

### API 集成规范
1. **统一请求封装**: 使用 Axios 拦截器处理请求/响应
2. **错误处理**: 统一的错误提示和处理机制
3. **Loading 状态**: 所有异步操作必须有 loading 状态
4. **类型定义**: 为所有 API 响应定义 TypeScript 类型
5. **接口文档**: 参考后端 Knife4j 文档 (http://localhost:8080/doc.html)

### 性能优化
1. **代码分割**: 使用 React.lazy 和 Suspense 进行路由级代码分割
2. **组件优化**: 合理使用 React.memo、useMemo、useCallback
3. **列表渲染**: 大数据量列表使用虚拟滚动
4. **图片优化**: 使用懒加载和 WebP 格式
5. **打包优化**: 配置 Vite 进行 chunk 分割和压缩

### 用户体验
1. **加载状态**: 所有异步操作显示 loading 动画
2. **错误提示**: 友好的错误提示信息
3. **表单验证**: 实时验证和清晰的错误提示
4. **操作反馈**: 成功/失败操作给予明确反馈
5. **响应式设计**: 支持不同屏幕尺寸

### 安全规范
1. **XSS 防护**: 避免使用 dangerouslySetInnerHTML
2. **CSRF 防护**: 请求携带 token
3. **敏感信息**: 不在前端存储敏感信息
4. **权限控制**: 基于角色的路由和按钮权限控制

### 测试规范
1. **单元测试**: 使用 Vitest + React Testing Library
2. **组件测试**: 测试组件的渲染和交互
3. **覆盖率**: 核心组件测试覆盖率 > 80%

### 文档规范
1. **组件文档**: 每个通用组件必须有使用说明
2. **API 注释**: 复杂函数添加 JSDoc 注释
3. **README**: 项目根目录维护完整的 README.md

## 开发流程

### 新功能开发
1. 阅读后端 API 文档，了解接口定义
2. 定义 TypeScript 类型（Request/Response）
3. 创建 API 服务函数
4. 开发页面组件（优先使用通用组件）
5. 实现业务逻辑和状态管理
6. 添加错误处理和 loading 状态
7. 测试功能和用户体验
8. 代码审查和优化

### 组件开发
1. 设计组件 API（Props 接口）
2. 实现组件逻辑
3. 应用设计规范样式
4. 编写使用示例
5. 添加到组件库统一导出

### Bug 修复
1. 复现问题
2. 定位问题代码
3. 修复并测试
4. 回归测试相关功能

## 最佳实践

### React 最佳实践
- 使用函数组件和 Hooks
- 避免不必要的重渲染
- 合理拆分组件粒度
- 使用 Context 避免 props drilling
- 遵循单一职责原则

### TypeScript 最佳实践
- 避免使用 any 类型
- 使用联合类型和类型守卫
- 善用泛型提高代码复用性
- 使用 interface 定义对象类型
- 使用 type 定义联合类型和工具类型

### 状态管理最佳实践
- 区分本地状态和全局状态
- 避免过度使用全局状态
- 使用 Zustand 管理跨组件状态
- 服务端状态考虑使用 React Query

### 样式最佳实践
- 优先使用 Ant Design 组件样式
- 使用 CSS-in-JS 或 CSS Modules
- 避免内联样式（除非动态计算）
- 遵循设计规范的颜色和间距

## 注意事项

1. **保持一致性**: 遵循现有代码风格和架构
2. **注重细节**: UI 细节决定用户体验
3. **性能优先**: 避免不必要的渲染和计算
4. **可维护性**: 代码清晰易懂，便于后续维护
5. **团队协作**: 及时沟通，代码审查

## 参考资源

- [React 官方文档](https://react.dev/)
- [TypeScript 官方文档](https://www.typescriptlang.org/)
- [Ant Design 官方文档](https://ant.design/)
- [Vite 官方文档](https://vitejs.dev/)
- [React Router 官方文档](https://reactrouter.com/)
